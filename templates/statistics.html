{% extends "base.html" %}
{% block content %}
<div class="bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-2xl font-semibold mb-4 text-indigo-600">Library Statistics</h2>
    <p class="text-gray-700 mb-4">Average Book Rating: <span class="font-medium">{{ avg_rating|round(2) }}</span></p>
    <h3 class="text-xl font-semibold mb-4 text-indigo-600">Library Activity (Last 30 Days)</h3>
    <!-- Debug: Display raw data -->
    <div class="mb-6 p-4 bg-gray-50 rounded-lg">
        <p class="font-medium text-gray-700">Debug Data:</p>
        <ul class="list-disc pl-5 text-gray-600">
            <li>Labels: {{ daily_loan_data.labels }}</li>
            <li>Loan Values: {{ daily_loan_data.loan_values }}</li>
            <li>Return Values: {{ daily_loan_data.return_values }}</li>
        </ul>
    </div>
    {% if daily_loan_data.labels|length > 0 %}
    <!-- Plotly plot -->
    <div class="border rounded-lg p-4 bg-white">
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        {{ daily_loan_data.plot_div|safe }}
    </div>
    {% else %}
    <p class="text-gray-600">No activity data available for the last 30 days.</p>
    {% endif %}
</div>
{% endblock %}